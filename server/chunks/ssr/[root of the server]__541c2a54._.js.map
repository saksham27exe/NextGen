{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/alert.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,6JACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG3B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBACnC,8OAAC;QACC,KAAK;QACL,MAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG;AAEpB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC3B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 181, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,iKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 333, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/video-call/page.tsx"],"sourcesContent":["\n'use client';\n\nimport { useState, useEffect, useRef, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle, CardFooter } from '@/components/ui/card';\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { useToast } from '@/hooks/use-toast';\nimport { Video, VideoOff, AlertCircle, Loader2, Copy, LogIn, Users, User, UserMinus, UserPlus, PhoneOff, Mic, MicOff } from 'lucide-react'; // Added User icon\nimport { useTranslation } from 'react-i18next';\nimport Link from 'next/link';\nimport { io, type Socket } from 'socket.io-client'; // Import socket.io-client\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\"\n\n// Simple unique code generation (replace with a more robust solution if needed)\nfunction generateMeetingCode(): string {\n  return Math.random().toString(36).substring(2, 8).toUpperCase();\n}\n\n// Type for participant data received from socket\ninterface Participant {\n    id: string; // Socket ID\n    name: string; // User name\n}\n\n// Placeholder for WebRTC configuration\nconst peerConnectionConfig: RTCConfiguration = {\n  iceServers: [\n    { urls: 'stun:stun.l.google.com:19302' }, // Example STUN server\n    // Add TURN servers here for production environments if needed\n  ],\n};\n\nexport default function VideoCallPage() {\n  const router = useRouter();\n  const { user, loading: authLoading } = useAuth();\n  const { toast } = useToast();\n  const { t } = useTranslation();\n  const localVideoRef = useRef<HTMLVideoElement>(null);\n  const remoteVideosRef = useRef<HTMLDivElement>(null); // Ref for remote video container\n  const socketRef = useRef<Socket | null>(null);\n  const peerConnectionsRef = useRef<Record<string, RTCPeerConnection>>({}); // Store peer connections { socketId: RTCPeerConnection }\n  const localStreamRef = useRef<MediaStream | null>(null);\n\n  const [hasCameraPermission, setHasCameraPermission] = useState<boolean | null>(null); // null initially, true/false after check\n  const [isMeetingActive, setIsMeetingActive] = useState(false);\n  const [meetingCode, setMeetingCode] = useState(''); // Room ID\n  const [isLoading, setIsLoading] = useState(true);\n  const [isConnecting, setIsConnecting] = useState(false); // Loading state for joining/starting\n  const [participantList, setParticipantList] = useState<Participant[]>([]); // Store participant info {id, name}\n  const [isAudioMuted, setIsAudioMuted] = useState(false);\n  const [isVideoOff, setIsVideoOff] = useState(false);\n  const [connectionError, setConnectionError] = useState<string | null>(null); // State for connection errors\n\n\n  // --- Socket.IO Connection ---\n  useEffect(() => {\n    if (!user || authLoading) return; // Don't connect if no user or still loading auth\n\n    setConnectionError(null); // Reset error on attempt\n\n    const socketServerUrl = process.env.NEXT_PUBLIC_SOCKET_SERVER_URL;\n\n    // Check if the URL is configured\n    if (!socketServerUrl) {\n      const errorMsg = t('page.videoCall.error.configMissing');\n      console.error(errorMsg);\n      toast({ variant: 'destructive', title: t('error.genericTitle'), description: errorMsg });\n      setConnectionError(errorMsg);\n      return; // Stop execution if URL is missing\n    }\n\n    // Log the actual URL being used\n    console.log(\"[VideoCallPage] Attempting to connect to Socket.IO server at:\", socketServerUrl);\n\n    // Prevent multiple connections\n    if (socketRef.current) {\n        console.log(\"[VideoCallPage] Socket already exists, skipping new connection.\");\n        return;\n    }\n\n\n    // Try forcing WebSocket transport first, as polling might be causing issues\n    const socket = io(socketServerUrl, {\n        transports: ['websocket', 'polling'], // Prioritize WebSocket\n        reconnectionAttempts: 3, // Limit reconnection attempts\n        // Consider adding timeout if connections hang indefinitely\n        // timeout: 5000, // e.g., 5 seconds\n    });\n    socketRef.current = socket;\n\n    socket.on('connect', () => {\n      console.log('[VideoCallPage] Connected to Socket.IO server with ID:', socket.id);\n      toast({ title: t('page.videoCall.toast.connectedTitle'), description: t('page.videoCall.toast.connectedDescription') });\n      setConnectionError(null); // Clear error on successful connection\n    });\n\n    socket.on('connect_error', (error) => {\n      // The error object might be complex, log relevant parts\n      const errorMessage = error.message || 'Unknown connection error';\n      const causeMessage = error.cause?.message || 'No cause provided'; // Get cause, if available\n      console.error('[VideoCallPage] Socket connection error:', errorMessage, 'Cause:', causeMessage, error); // Log full error object\n      const errorMsg = t('page.videoCall.error.connectionFailed', { url: socketServerUrl, details: errorMessage + (error.cause ? `. Cause: ${causeMessage}` : '') });\n      toast({ variant: 'destructive', title: t('page.videoCall.error.connectionFailedTitle'), description: errorMsg, duration: 10000 });\n      setConnectionError(errorMsg); // Set error state\n      // Clean up if connection fails\n      socket.disconnect();\n      socketRef.current = null;\n      setIsMeetingActive(false); // Ensure meeting state is reset\n      setIsConnecting(false);\n    });\n\n    socket.on('disconnect', (reason) => {\n      console.log('[VideoCallPage] Disconnected from Socket.IO server:', reason);\n      // Only show error and reset if actively in a meeting when disconnected\n      if (isMeetingActive) {\n        handleLeaveMeeting(false); // Clean up state without emitting 'leave'\n        const errorMsg = t('page.videoCall.error.disconnected');\n        toast({ variant: 'destructive', title: t('page.videoCall.error.disconnectedTitle'), description: errorMsg });\n        setConnectionError(errorMsg); // Set error state\n      }\n      // Ensure socketRef is nulled out on disconnect\n      socketRef.current = null;\n    });\n\n    // --- Room and Participant Handling ---\n    socket.on('room-created', (roomId: string) => {\n        console.log(`[VideoCallPage] Room created: ${roomId}`);\n        setIsMeetingActive(true);\n        setIsConnecting(false);\n        setMeetingCode(roomId);\n        // Add self immediately upon creation acknowledgment\n        if(user && socket.id) {\n            setParticipantList([{ id: socket.id, name: user.name }]);\n        }\n        toast({ title: t('page.videoCall.toast.startedTitle'), description: t('page.videoCall.toast.startedDescription', { code: roomId }) });\n        setConnectionError(null); // Clear error state\n    });\n\n    socket.on('room-joined', (roomId: string, participants: Participant[]) => {\n        console.log(`[VideoCallPage] Successfully joined room: ${roomId}`);\n        setIsMeetingActive(true);\n        setIsConnecting(false);\n        setMeetingCode(roomId); // Ensure meeting code is set\n        setParticipantList(participants); // Set full list from server\n        toast({ title: t('page.videoCall.toast.joiningTitle'), description: t('page.videoCall.toast.joiningDescription', { code: roomId }) });\n        // When joining, signal readiness to existing participants to initiate peer connections\n        if (socketRef.current) {\n            socketRef.current.emit('ready', roomId);\n        }\n        setConnectionError(null); // Clear error state\n    });\n\n    socket.on('room-join-error', (errorMsg: string) => {\n        console.error('[VideoCallPage] Error joining room:', errorMsg);\n        setIsConnecting(false);\n        toast({ variant: 'destructive', title: t('page.videoCall.toast.joinFailedTitle'), description: errorMsg });\n        setConnectionError(errorMsg); // Set error state\n    });\n\n    socket.on('update-participants', (participants: Participant[]) => {\n        console.log('[VideoCallPage] Participant list updated:', participants);\n        // Compare new list with old to show join/leave toasts\n        setParticipantList((prevList) => {\n            const prevIds = new Set(prevList.map(p => p.id));\n            const currentIds = new Set(participants.map(p => p.id));\n\n            participants.forEach(p => {\n                // Only show toast if the user wasn't already in the list AND it's not the current user\n                if (!prevIds.has(p.id) && p.id !== socketRef.current?.id) {\n                    toast({ title: t('page.videoCall.toast.participantJoined', { name: p.name }), variant: 'default' });\n                }\n            });\n\n            prevList.forEach(p => {\n                 // Only show toast if the user is no longer in the list AND it's not the current user\n                if (!currentIds.has(p.id) && p.id !== socketRef.current?.id) {\n                    toast({ title: t('page.videoCall.toast.participantLeft', { name: p.name }), variant: 'default' });\n                     // Clean up peer connection for the user who left\n                    if (peerConnectionsRef.current[p.id]) {\n                         peerConnectionsRef.current[p.id].close();\n                         delete peerConnectionsRef.current[p.id];\n                         removeRemoteVideo(p.id);\n                         console.log(`[VideoCallPage] Closed peer connection and removed video for user ${p.id}`);\n                     }\n                }\n            });\n            return participants; // Update state with the new list from server\n        });\n    });\n\n    // --- WebRTC Signaling Handling ---\n    socket.on('user-ready', (userId: string, userName: string) => {\n        // Check if it's not self-ready signal\n        if(userId !== socketRef.current?.id) {\n            console.log(`[VideoCallPage] User ${userName} (${userId}) is ready. Initiating peer connection.`);\n            initiatePeerConnection(userId, true); // Initiate connection as the caller\n        }\n    });\n\n    socket.on('offer', async (senderId: string, offer: RTCSessionDescriptionInit) => {\n        if (senderId === socketRef.current?.id) return; // Ignore offers from self\n        console.log(`[VideoCallPage] Received offer from ${senderId}`);\n        const pc = initiatePeerConnection(senderId, false); // Initiate connection as the callee\n        try {\n            await pc.setRemoteDescription(new RTCSessionDescription(offer));\n            const answer = await pc.createAnswer();\n            await pc.setLocalDescription(answer);\n            if(socketRef.current) {\n                socketRef.current.emit('answer', meetingCode, senderId, answer);\n                console.log(`[VideoCallPage] Sent answer to ${senderId}`);\n            }\n        } catch (error) {\n            console.error('[VideoCallPage] Error handling offer:', error);\n        }\n    });\n\n     socket.on('answer', async (senderId: string, answer: RTCSessionDescriptionInit) => {\n        if (senderId === socketRef.current?.id) return; // Ignore answers from self\n        console.log(`[VideoCallPage] Received answer from ${senderId}`);\n        const pc = peerConnectionsRef.current[senderId];\n        if (pc && pc.signalingState === 'have-local-offer') {\n            try {\n                await pc.setRemoteDescription(new RTCSessionDescription(answer));\n                console.log(`[VideoCallPage] Connection established with ${senderId}`);\n            } catch (error) {\n                console.error('[VideoCallPage] Error handling answer:', error);\n            }\n        } else {\n             console.warn(`[VideoCallPage] Received answer from ${senderId}, but no local offer or connection doesn't exist/unexpected state: ${pc?.signalingState}`);\n        }\n    });\n\n\n    socket.on('ice-candidate', async (senderId: string, candidate: RTCIceCandidateInit | null) => {\n        if (senderId === socketRef.current?.id) return; // Ignore own candidates\n        if (!candidate) {\n            console.log(`[VideoCallPage] Received null ICE candidate from ${senderId}, signaling end.`);\n            return;\n        }\n        console.log(`[VideoCallPage] Received ICE candidate from ${senderId}`);\n        const pc = peerConnectionsRef.current[senderId];\n        if (pc && pc.connectionState !== 'closed') { // Only add candidate if connection exists and isn't closed\n            try {\n                // Queue candidates if remote description isn't set yet\n                if(pc.remoteDescription) {\n                    await pc.addIceCandidate(new RTCIceCandidate(candidate));\n                } else {\n                    console.log(`[VideoCallPage] Queuing ICE candidate from ${senderId} as remote description is not set yet.`);\n                    // Simple queue (more robust queueing might be needed for complex scenarios)\n                    const queue = (pc as any).candidateQueue || [];\n                    queue.push(candidate);\n                    (pc as any).candidateQueue = queue;\n                }\n            } catch (error) {\n                // Ignore benign errors like adding candidate before remote description is fully set\n                if (error instanceof DOMException && error.name === 'InvalidStateError') {\n                    console.warn(`[VideoCallPage] Ignored InvalidStateError when adding ICE candidate for ${senderId}. Probably added before SRD.`);\n                } else {\n                    console.error('[VideoCallPage] Error adding received ICE candidate:', error);\n                }\n            }\n        } else {\n            console.warn(`[VideoCallPage] Received ICE candidate from ${senderId}, but peer connection doesn't exist or is closed.`);\n        }\n    });\n\n\n    // Cleanup on component unmount\n    return () => {\n      console.log(\"[VideoCallPage] Cleaning up video call component...\");\n      // Ensure handleLeaveMeeting logic runs fully\n      handleLeaveMeeting(false); // Pass false to prevent emitting 'leave' on unmount\n\n      // Explicitly disconnect socket if it exists\n      if (socketRef.current) {\n          console.log(\"[VideoCallPage] Disconnecting socket on unmount.\");\n          socketRef.current.disconnect();\n          socketRef.current = null;\n      }\n    };\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [user, authLoading]); // Re-run if user or authLoading changes\n\n\n  // --- Camera Permission ---\n  const requestCameraPermission = useCallback(async (onSuccess?: () => void, onFailure?: () => void) => {\n    console.log(\"[VideoCallPage] Requesting camera/mic permission...\");\n    setIsLoading(true);\n    try {\n        // Stop existing stream first, if any\n        if (localStreamRef.current) {\n            localStreamRef.current.getTracks().forEach(track => track.stop());\n            localStreamRef.current = null;\n        }\n        const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });\n        localStreamRef.current = stream; // Store the new stream\n        setHasCameraPermission(true);\n        if (localVideoRef.current) {\n            localVideoRef.current.srcObject = stream;\n            localVideoRef.current.muted = true; // Mute local video playback\n        }\n        console.log(\"[VideoCallPage] Camera/Mic access granted.\");\n        setIsLoading(false); // Moved inside success path\n        onSuccess?.(); // Call success callback\n    } catch (error) {\n        console.error('[VideoCallPage] Error accessing camera/microphone:', error);\n        setHasCameraPermission(false);\n        localStreamRef.current = null; // Ensure stream is null on error\n        toast({\n            variant: 'destructive',\n            title: t('page.videoCall.error.permissionDeniedTitle'),\n            description: t('page.videoCall.error.permissionDenied'),\n        });\n        setIsLoading(false); // Moved inside failure path\n        onFailure?.();\n    }\n    // Removed finally block as isLoading is set within try/catch\n  }, [toast, t]);\n\n  // --- WebRTC Peer Connection Logic ---\n  const initiatePeerConnection = (remoteSocketId: string, isInitiator: boolean): RTCPeerConnection => {\n    if (peerConnectionsRef.current[remoteSocketId]) {\n         console.log(`[VideoCallPage] Peer connection already exists for ${remoteSocketId}. Reusing.`);\n         // Potentially check state and reset if necessary, but reusing is often okay\n         return peerConnectionsRef.current[remoteSocketId];\n     }\n\n    console.log(`[VideoCallPage] Initiating peer connection with ${remoteSocketId}. Initiator: ${isInitiator}`);\n    const pc = new RTCPeerConnection(peerConnectionConfig);\n    peerConnectionsRef.current[remoteSocketId] = pc;\n\n    // Add local stream tracks\n    if (localStreamRef.current) {\n      localStreamRef.current.getTracks().forEach(track => {\n        try {\n            pc.addTrack(track, localStreamRef.current!);\n            console.log(`[VideoCallPage] Added local ${track.kind} track to connection with ${remoteSocketId}`);\n        } catch (error) {\n             console.error(`[VideoCallPage] Error adding local ${track.kind} track:`, error);\n        }\n      });\n    } else {\n        console.warn(\"[VideoCallPage] Local stream not available when initiating peer connection.\");\n        // Consider requesting permission here or handling the lack of stream gracefully\n    }\n\n    // Handle incoming remote tracks\n    pc.ontrack = (event) => {\n        console.log(`[VideoCallPage] Received remote track from ${remoteSocketId}:`, event.track.kind);\n        if (event.streams && event.streams[0]) {\n            addRemoteVideo(remoteSocketId, event.streams[0]);\n        } else {\n            // Handle cases where track might not have a stream initially (less common)\n            const inboundStream = new MediaStream([event.track]);\n            addRemoteVideo(remoteSocketId, inboundStream);\n        }\n    };\n\n    // Handle ICE candidates\n    pc.onicecandidate = (event) => {\n      if (event.candidate && socketRef.current && meetingCode) {\n        // console.log(`[VideoCallPage] Sending ICE candidate to ${remoteSocketId}`);\n        socketRef.current.emit('ice-candidate', meetingCode, remoteSocketId, event.candidate);\n      } else if (!event.candidate) {\n         console.log(`[VideoCallPage] Finished gathering ICE candidates for ${remoteSocketId}.`);\n         // Optionally send a null candidate to signal completion, depending on backend implementation\n         // socketRef.current?.emit('ice-candidate', meetingCode, remoteSocketId, null);\n      }\n    };\n\n     pc.onicecandidateerror = (event) => {\n         console.error(`[VideoCallPage] ICE candidate error for ${remoteSocketId}:`, event);\n     };\n\n    // Handle connection state changes\n    pc.onconnectionstatechange = () => {\n      const state = pc.connectionState;\n      console.log(`[VideoCallPage] Connection state with ${remoteSocketId} changed to: ${state}`);\n      if (state === 'failed' || state === 'disconnected' || state === 'closed') {\n          console.warn(`[VideoCallPage] Connection with ${remoteSocketId} ${state}. Cleaning up.`);\n          // Clean up connection and UI\n          if (peerConnectionsRef.current[remoteSocketId]) {\n             peerConnectionsRef.current[remoteSocketId].close();\n             delete peerConnectionsRef.current[remoteSocketId];\n          }\n          removeRemoteVideo(remoteSocketId);\n          // Optionally trigger participant list update if server doesn't handle disconnects fast enough\n          // Maybe emit a signal or rely on server's participant update\n      }\n    };\n\n    pc.onsignalingstatechange = async () => {\n        console.log(`[VideoCallPage] Signaling state with ${remoteSocketId} changed to: ${pc.signalingState}`);\n        // Process queued candidates if SRD is set and state allows\n        if (pc.remoteDescription && pc.signalingState === 'stable') {\n             const queue = (pc as any).candidateQueue || [];\n             console.log(`[VideoCallPage] Processing ${queue.length} queued candidates for ${remoteSocketId}`);\n             while (queue.length) {\n                 const candidate = queue.shift();\n                 try {\n                     await pc.addIceCandidate(new RTCIceCandidate(candidate));\n                 } catch (error) {\n                     console.error(`[VideoCallPage] Error adding queued ICE candidate for ${remoteSocketId}:`, error);\n                 }\n             }\n             (pc as any).candidateQueue = [];\n        }\n    };\n\n\n    // If initiator, create offer\n    if (isInitiator) {\n        // Ensure local stream tracks are added before creating offer\n        if (!localStreamRef.current) {\n            console.warn(\"[VideoCallPage] Attempting to create offer without a local stream.\");\n            // Optionally wait for stream or handle error\n        }\n        pc.createOffer()\n        .then(offer => pc.setLocalDescription(offer))\n        .then(() => {\n          if (socketRef.current && meetingCode) {\n              console.log(`[VideoCallPage] Sending offer to ${remoteSocketId}`);\n              socketRef.current.emit('offer', meetingCode, remoteSocketId, pc.localDescription);\n          }\n        })\n        .catch(error => console.error('[VideoCallPage] Error creating offer:', error));\n    }\n\n    return pc;\n  };\n\n  // --- Remote Video Handling ---\n  const addRemoteVideo = (socketId: string, stream: MediaStream) => {\n    if (!remoteVideosRef.current) return;\n\n    let videoWrapper = remoteVideosRef.current.querySelector(`div[data-socket-id=\"${socketId}\"]`);\n    let videoElement: HTMLVideoElement | null = null;\n    let nameElement: HTMLDivElement | null = null;\n    // Find participant name - use participantList which is updated by socket events\n    const participant = participantList.find(p => p.id === socketId);\n\n    if (!videoWrapper) {\n        console.log(`[VideoCallPage] Creating video wrapper for remote user ${socketId}`);\n        videoWrapper = document.createElement('div');\n        videoWrapper.setAttribute('data-socket-id', socketId);\n        videoWrapper.className = 'aspect-video bg-muted rounded-lg overflow-hidden relative border'; // Style the wrapper\n\n        videoElement = document.createElement('video');\n        videoElement.autoplay = true;\n        videoElement.playsInline = true;\n        videoElement.className = 'w-full h-full object-cover';\n        videoWrapper.appendChild(videoElement);\n\n        nameElement = document.createElement('div');\n        nameElement.className = 'absolute bottom-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded z-10'; // Ensure name is on top\n        nameElement.textContent = participant ? participant.name : socketId.substring(0, 6); // Display name or short ID\n        videoWrapper.appendChild(nameElement);\n\n        remoteVideosRef.current.appendChild(videoWrapper);\n    } else {\n        console.log(`[VideoCallPage] Updating stream for existing video element for user ${socketId}`);\n        videoElement = videoWrapper.querySelector('video');\n        nameElement = videoWrapper.querySelector('.absolute.bottom-2.left-2');\n        if(nameElement && participant && nameElement.textContent !== participant.name) {\n             nameElement.textContent = participant.name; // Update name if changed\n        }\n    }\n\n    // Assign stream if video element exists and stream is different\n    if (videoElement && videoElement.srcObject !== stream) {\n        videoElement.srcObject = stream;\n        // Attempt to play, might be needed in some browsers\n        videoElement.play().catch(e => console.warn(`[VideoCallPage] Video play failed for ${socketId}:`, e));\n    }\n  };\n\n\n  const removeRemoteVideo = (socketId: string) => {\n    if (!remoteVideosRef.current) return;\n    const videoWrapper = remoteVideosRef.current.querySelector(`div[data-socket-id=\"${socketId}\"]`);\n    if (videoWrapper) {\n      console.log(`[VideoCallPage] Removing video element for remote user ${socketId}`);\n      const videoElement = videoWrapper.querySelector('video');\n      // Stop tracks before removing element\n      if (videoElement && videoElement.srcObject) {\n          (videoElement.srcObject as MediaStream).getTracks().forEach(track => track.stop());\n          videoElement.srcObject = null; // Clear srcObject\n      }\n      // Use parentNode?.removeChild for safer removal\n      videoWrapper.parentNode?.removeChild(videoWrapper);\n    }\n  };\n\n\n  // --- Meeting Actions ---\n  const handleJoinMeeting = async () => {\n    if (!meetingCode.trim() || !user || !meetingCode.match(/^[A-Z0-9]{6}$/)) {\n         toast({ variant: 'destructive', title: t('page.videoCall.error.invalidCodeTitle'), description: t('page.videoCall.error.invalidCodeDescription') });\n         return;\n    }\n\n    if (!socketRef.current || !socketRef.current.connected) {\n         const errorMsg = t('page.videoCall.error.notConnected');\n         console.error(errorMsg);\n         toast({ variant: 'destructive', title: t('page.videoCall.error.connectionFailedTitle'), description: errorMsg });\n         setConnectionError(errorMsg);\n         return;\n     }\n\n    setIsConnecting(true); // Set loading state\n    setConnectionError(null); // Clear previous errors\n\n    const joinAction = () => {\n        if (socketRef.current) {\n            console.log(`[VideoCallPage] Attempting to join room: ${meetingCode} as user ${user.name}`);\n            socketRef.current.emit('join-room', meetingCode, user.name);\n            // Socket listeners will handle 'room-joined' or 'room-join-error'\n        } else {\n             console.error(\"[VideoCallPage] Socket not connected, cannot join room.\");\n             setIsConnecting(false);\n             const errorMsg = t('page.videoCall.error.notConnected');\n             toast({ variant: 'destructive', title: t('page.videoCall.error.connectionFailedTitle'), description: errorMsg });\n             setConnectionError(errorMsg);\n        }\n    };\n\n    const failureAction = () => {\n        setIsConnecting(false); // Reset connecting state if permission fails\n    };\n\n    if (hasCameraPermission === true) {\n      joinAction();\n    } else if (hasCameraPermission === false) {\n      toast({ variant: 'destructive', title: t('page.videoCall.error.permissionDeniedTitle'), description: t('page.videoCall.error.permissionRequired') });\n      setIsConnecting(false);\n    } else {\n      // Request permission, join on success, handle failure\n      await requestCameraPermission(joinAction, failureAction);\n    }\n  };\n\n  const handleGenerateCode = async () => {\n      if (!user) return;\n\n       if (!socketRef.current || !socketRef.current.connected) {\n         const errorMsg = t('page.videoCall.error.notConnected');\n         console.error(errorMsg);\n         toast({ variant: 'destructive', title: t('page.videoCall.error.connectionFailedTitle'), description: errorMsg });\n         setConnectionError(errorMsg);\n         return;\n       }\n\n      setIsConnecting(true);\n      setConnectionError(null);\n      const newCode = generateMeetingCode(); // Generate code locally first\n\n      const startAction = () => {\n          if (socketRef.current) {\n              console.log(`[VideoCallPage] Attempting to create room: ${newCode} as user ${user.name}`);\n              socketRef.current.emit('create-room', newCode, user.name);\n              // Socket listener will handle 'room-created'\n          } else {\n              console.error(\"[VideoCallPage] Socket not connected, cannot create room.\");\n              setIsConnecting(false);\n              const errorMsg = t('page.videoCall.error.notConnected');\n              toast({ variant: 'destructive', title: t('page.videoCall.error.connectionFailedTitle'), description: errorMsg });\n              setConnectionError(errorMsg);\n          }\n      };\n\n      const failureAction = () => {\n        setIsConnecting(false); // Reset connecting state if permission fails\n      };\n\n\n      if (hasCameraPermission === true) {\n          startAction();\n      } else if (hasCameraPermission === false) {\n          toast({ variant: 'destructive', title: t('page.videoCall.error.permissionDeniedTitle'), description: t('page.videoCall.error.permissionRequired') });\n          setIsConnecting(false);\n      } else {\n          await requestCameraPermission(startAction, failureAction);\n      }\n  };\n\n\n  const handleLeaveMeeting = (emitLeave = true) => {\n    console.log(\"[VideoCallPage] Leaving meeting...\");\n\n    // Stop local media stream first\n    if (localStreamRef.current) {\n      console.log(\"[VideoCallPage] Stopping local media tracks.\");\n      localStreamRef.current.getTracks().forEach(track => track.stop());\n      localStreamRef.current = null;\n    }\n    // Clear local video display\n    if (localVideoRef.current) {\n        localVideoRef.current.srcObject = null;\n    }\n\n    // Close all peer connections\n    console.log(\"[VideoCallPage] Closing peer connections.\");\n    Object.entries(peerConnectionsRef.current).forEach(([id, pc]) => {\n        console.log(`[VideoCallPage] Closing connection with ${id}`);\n        pc.close();\n        removeRemoteVideo(id); // Remove video element as well\n    });\n    peerConnectionsRef.current = {}; // Clear the refs\n\n    // Clear remote videos container just in case\n    if (remoteVideosRef.current) {\n        remoteVideosRef.current.innerHTML = '';\n    }\n\n    // Emit leave event if requested and socket is connected\n    if (emitLeave && socketRef.current && socketRef.current.connected && isMeetingActive && meetingCode) {\n        console.log(`[VideoCallPage] Emitting leave-room for ${meetingCode}`);\n        socketRef.current.emit('leave-room', meetingCode);\n    }\n\n    // Reset component state\n    setIsMeetingActive(false);\n    setMeetingCode('');\n    setParticipantList([]); // Clear participant list\n    setIsConnecting(false);\n    setIsAudioMuted(false);\n    setIsVideoOff(false);\n    // Don't reset hasCameraPermission here\n\n    if (emitLeave) { // Only show toast if user actively left\n         toast({ title: t('page.videoCall.toast.leftMeeting') });\n    }\n     console.log(\"[VideoCallPage] Leave meeting cleanup complete.\");\n  };\n\n  const toggleAudio = () => {\n     if (localStreamRef.current) {\n        const audioTracks = localStreamRef.current.getAudioTracks();\n        if (audioTracks.length > 0) {\n            const newState = !audioTracks[0].enabled;\n            audioTracks[0].enabled = newState;\n            setIsAudioMuted(!newState); // Muted state is inverse of enabled\n            toast({ title: newState ? t('page.videoCall.toast.micOn') : t('page.videoCall.toast.micOff') });\n            console.log(`[VideoCallPage] Microphone ${newState ? 'enabled' : 'disabled'}`);\n        } else {\n            console.warn(\"[VideoCallPage] No audio track found to toggle.\");\n        }\n    } else {\n        console.warn(\"[VideoCallPage] Local stream not available to toggle audio.\");\n    }\n  };\n\n  const toggleVideo = () => {\n      if (localStreamRef.current) {\n        const videoTracks = localStreamRef.current.getVideoTracks();\n        if (videoTracks.length > 0) {\n            const newState = !videoTracks[0].enabled;\n            videoTracks[0].enabled = newState;\n            setIsVideoOff(!newState); // Video off state is inverse of enabled\n            toast({ title: newState ? t('page.videoCall.toast.cameraOn') : t('page.videoCall.toast.cameraOff') });\n            console.log(`[VideoCallPage] Camera ${newState ? 'enabled' : 'disabled'}`);\n        } else {\n             console.warn(\"[VideoCallPage] No video track found to toggle.\");\n        }\n    } else {\n        console.warn(\"[VideoCallPage] Local stream not available to toggle video.\");\n    }\n  };\n\n\n  const copyCodeToClipboard = () => {\n    if (meetingCode) {\n      navigator.clipboard.writeText(meetingCode)\n        .then(() => {\n          toast({ title: t('page.videoCall.toast.codeCopied') });\n        })\n        .catch(err => {\n          console.error('[VideoCallPage] Failed to copy meeting code: ', err);\n          toast({ variant: 'destructive', title: t('page.videoCall.error.copyFailed') });\n        });\n    }\n  };\n\n  // --- Render Logic ---\n\n  if (authLoading) {\n    return (\n      <div className=\"flex justify-center items-center min-h-[calc(100vh-200px)]\">\n        <Loader2 className=\"h-12 w-12 animate-spin text-primary\" />\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <div className=\"text-center py-10\">\n        <AlertCircle className=\"mx-auto h-12 w-12 text-destructive mb-4\" />\n        <h1 className=\"text-2xl font-semibold mb-2\">{t('toast.accessDenied.title')}</h1>\n        <p className=\"text-muted-foreground mb-6\">{t('accessDenied.loginRequired.page', { pageName: t('header.videoCall') })}</p>\n        <Link href=\"/login\">\n          <Button><LogIn className=\"mr-2 h-4 w-4\" /> {t('login.loginButton')}</Button>\n        </Link>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto py-8 px-4 md:px-6\">\n      <Card className=\"shadow-xl\">\n        <CardHeader>\n          <CardTitle className=\"text-3xl font-bold tracking-tight flex items-center\">\n            <Video className=\"mr-3 h-8 w-8 text-primary\" />\n            {t('page.videoCall.title')}\n          </CardTitle>\n          <CardDescription>\n            {isMeetingActive\n              ? t('page.videoCall.description.inMeeting', { code: meetingCode })\n              : t('page.videoCall.description.joinOrCreate')}\n          </CardDescription>\n           <Alert variant=\"destructive\" className=\"mt-4\">\n             <AlertCircle className=\"h-4 w-4\" />\n             <AlertTitle>{t('page.videoCall.warning.backendTitle')}</AlertTitle>\n             <AlertDescription>\n                {t('page.videoCall.warning.backendDescription', { url: process.env.NEXT_PUBLIC_SOCKET_SERVER_URL || t('page.videoCall.warning.urlNotSet') })}\n             </AlertDescription>\n          </Alert>\n           {/* Display connection error prominently if it occurs before joining */}\n           {connectionError && !isMeetingActive && (\n             <Alert variant=\"destructive\" className=\"mt-4\">\n               <AlertCircle className=\"h-4 w-4\" />\n               <AlertTitle>{t('page.videoCall.error.connectionFailedTitle')}</AlertTitle>\n               <AlertDescription>\n                 {connectionError}\n                 <br />\n                 {t('page.videoCall.error.checkServer')}\n               </AlertDescription>\n             </Alert>\n            )}\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          {isMeetingActive ? (\n            // --- Meeting Active View ---\n            <div className=\"space-y-4\">\n              {/* Video Grid */}\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 p-4 border rounded-lg bg-muted/20\">\n                  {/* Local Video */}\n                  <div className=\"aspect-video bg-muted rounded-lg overflow-hidden relative border shadow-md\">\n                    <video ref={localVideoRef} className=\"w-full h-full object-cover\" autoPlay muted playsInline />\n                    <div className=\"absolute bottom-2 left-2 bg-black/60 text-white text-xs px-2 py-1 rounded z-10\">\n                        {user.name} ({t('page.videoCall.you')})\n                    </div>\n                    {/* Mute/Video Off Indicators for Local */}\n                    <div className=\"absolute top-2 right-2 flex gap-1 z-10\">\n                         {isAudioMuted && <MicOff className=\"h-5 w-5 text-destructive bg-black/50 p-1 rounded-full\" />}\n                         {isVideoOff && <VideoOff className=\"h-5 w-5 text-destructive bg-black/50 p-1 rounded-full\" />}\n                    </div>\n\n                    {/* Loading/Permission States Overlays */}\n                    {hasCameraPermission === false && (\n                        <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-black/70 text-destructive-foreground p-4 text-center z-20\">\n                            <VideoOff className=\"h-16 w-16 mb-4\" />\n                            <p className=\"text-lg font-semibold\">{t('page.videoCall.error.permissionDeniedTitle')}</p>\n                            <p>{t('page.videoCall.error.permissionInstructions')}</p>\n                        </div>\n                    )}\n                    {hasCameraPermission === null && isLoading && (\n                        <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-black/70 text-white p-4 z-20\">\n                            <Loader2 className=\"h-12 w-12 animate-spin mb-4\" />\n                            <p>{t('page.videoCall.requestingPermission')}</p>\n                        </div>\n                    )}\n                     {isVideoOff && (\n                          <div className=\"absolute inset-0 flex items-center justify-center bg-black/50 text-white z-10\">\n                              {/* Display user initials or icon when video is off */}\n                              <span className=\"text-4xl font-semibold\">{user.name.charAt(0).toUpperCase()}</span>\n                              {/* <User className=\"h-16 w-16\" /> */}\n                          </div>\n                      )}\n                  </div>\n\n                   {/* Remote Videos Container - elements added dynamically */}\n                  <div ref={remoteVideosRef} className=\"col-span-1 sm:col-span-1 lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    {/* Placeholder shown only if truly no *other* participants */}\n                    {participantList.filter(p => p.id !== socketRef.current?.id).length === 0 && (\n                        <div className=\"aspect-video bg-muted/50 rounded-lg flex items-center justify-center text-muted-foreground text-center p-4 md:col-span-2\">\n                            {t('page.videoCall.waitingForOthers')}\n                        </div>\n                    )}\n                     {/* Remote video wrappers will be appended here by addRemoteVideo */}\n                  </div>\n               </div>\n\n\n              {/* Meeting Info & Controls Row */}\n              <div className=\"flex flex-col sm:flex-row justify-between items-center gap-4 p-4 border rounded-md bg-muted/50 flex-wrap\">\n                 {/* Participant Info & Dropdown */}\n                 <DropdownMenu>\n                    <DropdownMenuTrigger asChild>\n                        <Button variant=\"outline\" size=\"sm\">\n                            <Users className=\"mr-2 h-4 w-4\" />\n                            {t('page.videoCall.participants', { count: participantList.length })}\n                        </Button>\n                    </DropdownMenuTrigger>\n                    <DropdownMenuContent align=\"start\" className=\"w-64 max-h-60 overflow-y-auto\">\n                        <DropdownMenuLabel>{t('page.videoCall.participantListTitle')}</DropdownMenuLabel>\n                        <DropdownMenuSeparator />\n                        {participantList.length > 0 ? (\n                            participantList.map((p) => (\n                                <DropdownMenuItem key={p.id} className=\"flex items-center gap-2 cursor-default\">\n                                     {/* Use different icons for self vs others */}\n                                    {p.id === socketRef.current?.id\n                                        ? <UserPlus className=\"h-4 w-4 text-primary\" />\n                                        : <User className=\"h-4 w-4 text-muted-foreground\" />\n                                    }\n                                    <span className=\"truncate font-medium\">{p.name}</span>\n                                    {p.id === socketRef.current?.id && <span className=\"text-xs text-muted-foreground ml-auto\">({t('page.videoCall.you')})</span>}\n                                </DropdownMenuItem>\n                            ))\n                        ) : (\n                            <DropdownMenuItem disabled>{t('page.videoCall.noParticipants')}</DropdownMenuItem>\n                        )}\n                    </DropdownMenuContent>\n                </DropdownMenu>\n\n                 {/* Meeting Code & Copy */}\n                 <div className=\"flex items-center gap-1 sm:gap-2 bg-background border rounded-md px-3 py-1.5\">\n                    <span className=\"text-xs sm:text-sm text-muted-foreground\">{t('page.videoCall.meetingCodeLabel')}:</span>\n                    <span className=\"font-mono font-semibold text-primary text-sm\">{meetingCode}</span>\n                    <Button variant=\"ghost\" size=\"icon\" onClick={copyCodeToClipboard} aria-label={t('page.videoCall.button.copyCode')} className=\"h-6 w-6 ml-1\">\n                        <Copy className=\"h-3.5 w-3.5\" />\n                    </Button>\n                 </div>\n\n                 {/* Media Controls */}\n                 <div className=\"flex items-center gap-2\">\n                    <Button variant={isAudioMuted ? \"destructive\" : \"outline\"} size=\"icon\" onClick={toggleAudio} aria-label={isAudioMuted ? t('page.videoCall.unmuteMicAria') : t('page.videoCall.muteMicAria')}>\n                        {isAudioMuted ? <MicOff className=\"h-4 w-4\" /> : <Mic className=\"h-4 w-4\" />}\n                    </Button>\n                    <Button variant={isVideoOff ? \"destructive\" : \"outline\"} size=\"icon\" onClick={toggleVideo} aria-label={isVideoOff ? t('page.videoCall.cameraOnAria') : t('page.videoCall.cameraOffAria')}>\n                        {isVideoOff ? <VideoOff className=\"h-4 w-4\" /> : <Video className=\"h-4 w-4\" />}\n                    </Button>\n                 </div>\n\n                  {/* Leave Meeting Button */}\n                  <Button onClick={() => handleLeaveMeeting(true)} variant=\"destructive\">\n                    <PhoneOff className=\"mr-2 h-4 w-4\" />\n                    {t('page.videoCall.button.leaveMeeting')}\n                 </Button>\n              </div>\n            </div>\n          ) : (\n            // --- Pre-Meeting View ---\n            <div className=\"flex flex-col md:flex-row gap-6 items-stretch\">\n              {/* Join Meeting Card */}\n              <Card className=\"flex-1 flex flex-col shadow-md\">\n                <CardHeader>\n                  <CardTitle>{t('page.videoCall.joinTitle')}</CardTitle>\n                  <CardDescription>{t('page.videoCall.joinDescription')}</CardDescription>\n                </CardHeader>\n                <CardContent className=\"flex-grow\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"meetingCode\">{t('page.videoCall.label.meetingCode')}</Label>\n                    <Input\n                      id=\"meetingCode\"\n                      placeholder={t('page.videoCall.placeholder.meetingCode')}\n                      value={meetingCode}\n                      onChange={(e) => setMeetingCode(e.target.value.toUpperCase().trim())} // Ensure uppercase and trim\n                      maxLength={6}\n                      className=\"font-mono tracking-widest text-center text-lg h-12\"\n                      disabled={isLoading || isConnecting || !!connectionError} // Disable if connecting or error\n                      aria-required=\"true\"\n                      aria-invalid={!!connectionError} // Indicate invalid state on connection error\n                    />\n                  </div>\n                </CardContent>\n                <CardFooter className=\"flex justify-end\">\n                  <Button onClick={handleJoinMeeting} className=\"w-full\" disabled={isLoading || isConnecting || !meetingCode || meetingCode.length !== 6 || !!connectionError}>\n                    {isConnecting ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : <LogIn className=\"mr-2 h-4 w-4\" />}\n                    {t('page.videoCall.button.joinMeeting')}\n                  </Button>\n                </CardFooter>\n              </Card>\n\n              {/* Start Meeting Card (Court Official Only) */}\n              {user.role === 'CourtOfficial' && (\n                <Card className=\"flex-1 border-primary bg-primary/5 flex flex-col shadow-md\">\n                  <CardHeader>\n                    <CardTitle>{t('page.videoCall.startTitle')}</CardTitle>\n                    <CardDescription>{t('page.videoCall.startDescription')}</CardDescription>\n                  </CardHeader>\n                  <CardContent className=\"text-center flex-grow flex items-center justify-center\">\n                     <Button onClick={handleGenerateCode} className=\"w-full\" disabled={isLoading || isConnecting || !!connectionError}>\n                         {isConnecting ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : <Video className=\"mr-2 h-4 w-4\" />}\n                         {t('page.videoCall.button.startMeeting')}\n                    </Button>\n                  </CardContent>\n                   <CardFooter>\n                       <p className=\"text-xs text-muted-foreground text-center w-full\">{t('page.videoCall.startHint')}</p>\n                   </CardFooter>\n                </Card>\n              )}\n            </div>\n          )}\n\n          {/* Camera Permission Alert - Shown only before joining/starting */}\n          {hasCameraPermission === false && !isMeetingActive && (\n            <Alert variant=\"destructive\" className=\"mt-6\">\n              <AlertCircle className=\"h-4 w-4\" />\n              <AlertTitle>{t('page.videoCall.error.permissionDeniedTitle')}</AlertTitle>\n              <AlertDescription>\n                {t('page.videoCall.error.permissionInstructions')}\n                 <Button variant=\"link\" className=\"p-0 h-auto ml-1 text-destructive-foreground underline\" onClick={() => requestCameraPermission(() => {}, () => {})}>\n                    {t('page.videoCall.button.retryPermission')}\n                 </Button>\n              </AlertDescription>\n            </Alert>\n          )}\n           {/* General Instructions/Info */}\n          {!isMeetingActive && !connectionError && (\n             <Alert variant=\"default\" className=\"mt-6\">\n               <Video className=\"h-4 w-4\" />\n               <AlertTitle>{t('page.videoCall.infoTitle')}</AlertTitle>\n               <AlertDescription>\n                   {t('page.videoCall.infoText')}\n                   {user.role === 'CourtOfficial' ? ` ${t('page.videoCall.infoTextOfficial')}` : ` ${t('page.videoCall.infoTextParticipant')}`}\n               </AlertDescription>\n             </Alert>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oVAA4I,kBAAkB;AAA9J;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA,mVAAoD,0BAA0B;AAA9E;AACA;AAfA;;;;;;;;;;;;;;;;AAwBA,gFAAgF;AAChF,SAAS;IACP,OAAO,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,GAAG,GAAG,WAAW;AAC/D;AAQA,uCAAuC;AACvC,MAAM,uBAAyC;IAC7C,YAAY;QACV;YAAE,MAAM;QAA+B;KAExC;AACH;AAEe,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,IAAI,EAAE,SAAS,WAAW,EAAE,GAAG,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IAC7C,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,4HAAA,CAAA,WAAQ,AAAD;IACzB,MAAM,EAAE,CAAC,EAAE,GAAG,CAAA,GAAA,gKAAA,CAAA,iBAAc,AAAD;IAC3B,MAAM,gBAAgB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAoB;IAC/C,MAAM,kBAAkB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAkB,OAAO,iCAAiC;IACvF,MAAM,YAAY,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAiB;IACxC,MAAM,qBAAqB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAqC,CAAC,IAAI,yDAAyD;IACnI,MAAM,iBAAiB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAsB;IAElD,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAkB,OAAO,yCAAyC;IAC/H,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,KAAK,UAAU;IAC9D,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,QAAQ,qCAAqC;IAC9F,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB,EAAE,GAAG,oCAAoC;IAC/G,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB,OAAO,8BAA8B;IAG3G,+BAA+B;IAC/B,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,QAAQ,aAAa,QAAQ,iDAAiD;QAEnF,mBAAmB,OAAO,yBAAyB;QAEnD,MAAM;QAEN,iCAAiC;QACjC,uCAAsB;;QAMtB;QAEA,gCAAgC;QAChC,QAAQ,GAAG,CAAC,iEAAiE;QAE7E,+BAA+B;QAC/B,IAAI,UAAU,OAAO,EAAE;YACnB,QAAQ,GAAG,CAAC;YACZ;QACJ;QAGA,4EAA4E;QAC5E,MAAM,SAAS,CAAA,GAAA,wLAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;YAC/B,YAAY;gBAAC;gBAAa;aAAU;YACpC,sBAAsB;QAG1B;QACA,UAAU,OAAO,GAAG;QAEpB,OAAO,EAAE,CAAC,WAAW;YACnB,QAAQ,GAAG,CAAC,0DAA0D,OAAO,EAAE;YAC/E,MAAM;gBAAE,OAAO,EAAE;gBAAwC,aAAa,EAAE;YAA6C;YACrH,mBAAmB,OAAO,uCAAuC;QACnE;QAEA,OAAO,EAAE,CAAC,iBAAiB,CAAC;YAC1B,wDAAwD;YACxD,MAAM,eAAe,MAAM,OAAO,IAAI;YACtC,MAAM,eAAe,MAAM,KAAK,EAAE,WAAW,qBAAqB,0BAA0B;YAC5F,QAAQ,KAAK,CAAC,4CAA4C,cAAc,UAAU,cAAc,QAAQ,wBAAwB;YAChI,MAAM,WAAW,EAAE,yCAAyC;gBAAE,KAAK;gBAAiB,SAAS,eAAe,CAAC,MAAM,KAAK,GAAG,CAAC,SAAS,EAAE,cAAc,GAAG,EAAE;YAAE;YAC5J,MAAM;gBAAE,SAAS;gBAAe,OAAO,EAAE;gBAA+C,aAAa;gBAAU,UAAU;YAAM;YAC/H,mBAAmB,WAAW,kBAAkB;YAChD,+BAA+B;YAC/B,OAAO,UAAU;YACjB,UAAU,OAAO,GAAG;YACpB,mBAAmB,QAAQ,gCAAgC;YAC3D,gBAAgB;QAClB;QAEA,OAAO,EAAE,CAAC,cAAc,CAAC;YACvB,QAAQ,GAAG,CAAC,uDAAuD;YACnE,uEAAuE;YACvE,IAAI,iBAAiB;gBACnB,mBAAmB,QAAQ,0CAA0C;gBACrE,MAAM,WAAW,EAAE;gBACnB,MAAM;oBAAE,SAAS;oBAAe,OAAO,EAAE;oBAA2C,aAAa;gBAAS;gBAC1G,mBAAmB,WAAW,kBAAkB;YAClD;YACA,+CAA+C;YAC/C,UAAU,OAAO,GAAG;QACtB;QAEA,wCAAwC;QACxC,OAAO,EAAE,CAAC,gBAAgB,CAAC;YACvB,QAAQ,GAAG,CAAC,CAAC,8BAA8B,EAAE,QAAQ;YACrD,mBAAmB;YACnB,gBAAgB;YAChB,eAAe;YACf,oDAAoD;YACpD,IAAG,QAAQ,OAAO,EAAE,EAAE;gBAClB,mBAAmB;oBAAC;wBAAE,IAAI,OAAO,EAAE;wBAAE,MAAM,KAAK,IAAI;oBAAC;iBAAE;YAC3D;YACA,MAAM;gBAAE,OAAO,EAAE;gBAAsC,aAAa,EAAE,2CAA2C;oBAAE,MAAM;gBAAO;YAAG;YACnI,mBAAmB,OAAO,oBAAoB;QAClD;QAEA,OAAO,EAAE,CAAC,eAAe,CAAC,QAAgB;YACtC,QAAQ,GAAG,CAAC,CAAC,0CAA0C,EAAE,QAAQ;YACjE,mBAAmB;YACnB,gBAAgB;YAChB,eAAe,SAAS,6BAA6B;YACrD,mBAAmB,eAAe,4BAA4B;YAC9D,MAAM;gBAAE,OAAO,EAAE;gBAAsC,aAAa,EAAE,2CAA2C;oBAAE,MAAM;gBAAO;YAAG;YACnI,uFAAuF;YACvF,IAAI,UAAU,OAAO,EAAE;gBACnB,UAAU,OAAO,CAAC,IAAI,CAAC,SAAS;YACpC;YACA,mBAAmB,OAAO,oBAAoB;QAClD;QAEA,OAAO,EAAE,CAAC,mBAAmB,CAAC;YAC1B,QAAQ,KAAK,CAAC,uCAAuC;YACrD,gBAAgB;YAChB,MAAM;gBAAE,SAAS;gBAAe,OAAO,EAAE;gBAAyC,aAAa;YAAS;YACxG,mBAAmB,WAAW,kBAAkB;QACpD;QAEA,OAAO,EAAE,CAAC,uBAAuB,CAAC;YAC9B,QAAQ,GAAG,CAAC,6CAA6C;YACzD,sDAAsD;YACtD,mBAAmB,CAAC;gBAChB,MAAM,UAAU,IAAI,IAAI,SAAS,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE;gBAC9C,MAAM,aAAa,IAAI,IAAI,aAAa,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE;gBAErD,aAAa,OAAO,CAAC,CAAA;oBACjB,uFAAuF;oBACvF,IAAI,CAAC,QAAQ,GAAG,CAAC,EAAE,EAAE,KAAK,EAAE,EAAE,KAAK,UAAU,OAAO,EAAE,IAAI;wBACtD,MAAM;4BAAE,OAAO,EAAE,0CAA0C;gCAAE,MAAM,EAAE,IAAI;4BAAC;4BAAI,SAAS;wBAAU;oBACrG;gBACJ;gBAEA,SAAS,OAAO,CAAC,CAAA;oBACZ,qFAAqF;oBACtF,IAAI,CAAC,WAAW,GAAG,CAAC,EAAE,EAAE,KAAK,EAAE,EAAE,KAAK,UAAU,OAAO,EAAE,IAAI;wBACzD,MAAM;4BAAE,OAAO,EAAE,wCAAwC;gCAAE,MAAM,EAAE,IAAI;4BAAC;4BAAI,SAAS;wBAAU;wBAC9F,iDAAiD;wBAClD,IAAI,mBAAmB,OAAO,CAAC,EAAE,EAAE,CAAC,EAAE;4BACjC,mBAAmB,OAAO,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK;4BACtC,OAAO,mBAAmB,OAAO,CAAC,EAAE,EAAE,CAAC;4BACvC,kBAAkB,EAAE,EAAE;4BACtB,QAAQ,GAAG,CAAC,CAAC,kEAAkE,EAAE,EAAE,EAAE,EAAE;wBAC3F;oBACL;gBACJ;gBACA,OAAO,cAAc,6CAA6C;YACtE;QACJ;QAEA,oCAAoC;QACpC,OAAO,EAAE,CAAC,cAAc,CAAC,QAAgB;YACrC,sCAAsC;YACtC,IAAG,WAAW,UAAU,OAAO,EAAE,IAAI;gBACjC,QAAQ,GAAG,CAAC,CAAC,qBAAqB,EAAE,SAAS,EAAE,EAAE,OAAO,uCAAuC,CAAC;gBAChG,uBAAuB,QAAQ,OAAO,oCAAoC;YAC9E;QACJ;QAEA,OAAO,EAAE,CAAC,SAAS,OAAO,UAAkB;YACxC,IAAI,aAAa,UAAU,OAAO,EAAE,IAAI,QAAQ,0BAA0B;YAC1E,QAAQ,GAAG,CAAC,CAAC,oCAAoC,EAAE,UAAU;YAC7D,MAAM,KAAK,uBAAuB,UAAU,QAAQ,oCAAoC;YACxF,IAAI;gBACA,MAAM,GAAG,oBAAoB,CAAC,IAAI,sBAAsB;gBACxD,MAAM,SAAS,MAAM,GAAG,YAAY;gBACpC,MAAM,GAAG,mBAAmB,CAAC;gBAC7B,IAAG,UAAU,OAAO,EAAE;oBAClB,UAAU,OAAO,CAAC,IAAI,CAAC,UAAU,aAAa,UAAU;oBACxD,QAAQ,GAAG,CAAC,CAAC,+BAA+B,EAAE,UAAU;gBAC5D;YACJ,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,yCAAyC;YAC3D;QACJ;QAEC,OAAO,EAAE,CAAC,UAAU,OAAO,UAAkB;YAC1C,IAAI,aAAa,UAAU,OAAO,EAAE,IAAI,QAAQ,2BAA2B;YAC3E,QAAQ,GAAG,CAAC,CAAC,qCAAqC,EAAE,UAAU;YAC9D,MAAM,KAAK,mBAAmB,OAAO,CAAC,SAAS;YAC/C,IAAI,MAAM,GAAG,cAAc,KAAK,oBAAoB;gBAChD,IAAI;oBACA,MAAM,GAAG,oBAAoB,CAAC,IAAI,sBAAsB;oBACxD,QAAQ,GAAG,CAAC,CAAC,4CAA4C,EAAE,UAAU;gBACzE,EAAE,OAAO,OAAO;oBACZ,QAAQ,KAAK,CAAC,0CAA0C;gBAC5D;YACJ,OAAO;gBACF,QAAQ,IAAI,CAAC,CAAC,qCAAqC,EAAE,SAAS,mEAAmE,EAAE,IAAI,gBAAgB;YAC5J;QACJ;QAGA,OAAO,EAAE,CAAC,iBAAiB,OAAO,UAAkB;YAChD,IAAI,aAAa,UAAU,OAAO,EAAE,IAAI,QAAQ,wBAAwB;YACxE,IAAI,CAAC,WAAW;gBACZ,QAAQ,GAAG,CAAC,CAAC,iDAAiD,EAAE,SAAS,gBAAgB,CAAC;gBAC1F;YACJ;YACA,QAAQ,GAAG,CAAC,CAAC,4CAA4C,EAAE,UAAU;YACrE,MAAM,KAAK,mBAAmB,OAAO,CAAC,SAAS;YAC/C,IAAI,MAAM,GAAG,eAAe,KAAK,UAAU;gBACvC,IAAI;oBACA,uDAAuD;oBACvD,IAAG,GAAG,iBAAiB,EAAE;wBACrB,MAAM,GAAG,eAAe,CAAC,IAAI,gBAAgB;oBACjD,OAAO;wBACH,QAAQ,GAAG,CAAC,CAAC,2CAA2C,EAAE,SAAS,sCAAsC,CAAC;wBAC1G,4EAA4E;wBAC5E,MAAM,QAAQ,AAAC,GAAW,cAAc,IAAI,EAAE;wBAC9C,MAAM,IAAI,CAAC;wBACV,GAAW,cAAc,GAAG;oBACjC;gBACJ,EAAE,OAAO,OAAO;oBACZ,oFAAoF;oBACpF,IAAI,iBAAiB,gBAAgB,MAAM,IAAI,KAAK,qBAAqB;wBACrE,QAAQ,IAAI,CAAC,CAAC,wEAAwE,EAAE,SAAS,4BAA4B,CAAC;oBAClI,OAAO;wBACH,QAAQ,KAAK,CAAC,wDAAwD;oBAC1E;gBACJ;YACJ,OAAO;gBACH,QAAQ,IAAI,CAAC,CAAC,4CAA4C,EAAE,SAAS,iDAAiD,CAAC;YAC3H;QACJ;QAGA,+BAA+B;QAC/B,OAAO;YACL,QAAQ,GAAG,CAAC;YACZ,6CAA6C;YAC7C,mBAAmB,QAAQ,oDAAoD;YAE/E,4CAA4C;YAC5C,IAAI,UAAU,OAAO,EAAE;gBACnB,QAAQ,GAAG,CAAC;gBACZ,UAAU,OAAO,CAAC,UAAU;gBAC5B,UAAU,OAAO,GAAG;YACxB;QACF;IACF,uDAAuD;IACvD,GAAG;QAAC;QAAM;KAAY,GAAG,wCAAwC;IAGjE,4BAA4B;IAC5B,MAAM,0BAA0B,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO,WAAwB;QACzE,QAAQ,GAAG,CAAC;QACZ,aAAa;QACb,IAAI;YACA,qCAAqC;YACrC,IAAI,eAAe,OAAO,EAAE;gBACxB,eAAe,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC,CAAA,QAAS,MAAM,IAAI;gBAC9D,eAAe,OAAO,GAAG;YAC7B;YACA,MAAM,SAAS,MAAM,UAAU,YAAY,CAAC,YAAY,CAAC;gBAAE,OAAO;gBAAM,OAAO;YAAK;YACpF,eAAe,OAAO,GAAG,QAAQ,uBAAuB;YACxD,uBAAuB;YACvB,IAAI,cAAc,OAAO,EAAE;gBACvB,cAAc,OAAO,CAAC,SAAS,GAAG;gBAClC,cAAc,OAAO,CAAC,KAAK,GAAG,MAAM,4BAA4B;YACpE;YACA,QAAQ,GAAG,CAAC;YACZ,aAAa,QAAQ,4BAA4B;YACjD,eAAe,wBAAwB;QAC3C,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,sDAAsD;YACpE,uBAAuB;YACvB,eAAe,OAAO,GAAG,MAAM,iCAAiC;YAChE,MAAM;gBACF,SAAS;gBACT,OAAO,EAAE;gBACT,aAAa,EAAE;YACnB;YACA,aAAa,QAAQ,4BAA4B;YACjD;QACJ;IACA,6DAA6D;IAC/D,GAAG;QAAC;QAAO;KAAE;IAEb,uCAAuC;IACvC,MAAM,yBAAyB,CAAC,gBAAwB;QACtD,IAAI,mBAAmB,OAAO,CAAC,eAAe,EAAE;YAC3C,QAAQ,GAAG,CAAC,CAAC,mDAAmD,EAAE,eAAe,UAAU,CAAC;YAC5F,4EAA4E;YAC5E,OAAO,mBAAmB,OAAO,CAAC,eAAe;QACrD;QAED,QAAQ,GAAG,CAAC,CAAC,gDAAgD,EAAE,eAAe,aAAa,EAAE,aAAa;QAC1G,MAAM,KAAK,IAAI,kBAAkB;QACjC,mBAAmB,OAAO,CAAC,eAAe,GAAG;QAE7C,0BAA0B;QAC1B,IAAI,eAAe,OAAO,EAAE;YAC1B,eAAe,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC,CAAA;gBACzC,IAAI;oBACA,GAAG,QAAQ,CAAC,OAAO,eAAe,OAAO;oBACzC,QAAQ,GAAG,CAAC,CAAC,4BAA4B,EAAE,MAAM,IAAI,CAAC,0BAA0B,EAAE,gBAAgB;gBACtG,EAAE,OAAO,OAAO;oBACX,QAAQ,KAAK,CAAC,CAAC,mCAAmC,EAAE,MAAM,IAAI,CAAC,OAAO,CAAC,EAAE;gBAC9E;YACF;QACF,OAAO;YACH,QAAQ,IAAI,CAAC;QACb,gFAAgF;QACpF;QAEA,gCAAgC;QAChC,GAAG,OAAO,GAAG,CAAC;YACV,QAAQ,GAAG,CAAC,CAAC,2CAA2C,EAAE,eAAe,CAAC,CAAC,EAAE,MAAM,KAAK,CAAC,IAAI;YAC7F,IAAI,MAAM,OAAO,IAAI,MAAM,OAAO,CAAC,EAAE,EAAE;gBACnC,eAAe,gBAAgB,MAAM,OAAO,CAAC,EAAE;YACnD,OAAO;gBACH,2EAA2E;gBAC3E,MAAM,gBAAgB,IAAI,YAAY;oBAAC,MAAM,KAAK;iBAAC;gBACnD,eAAe,gBAAgB;YACnC;QACJ;QAEA,wBAAwB;QACxB,GAAG,cAAc,GAAG,CAAC;YACnB,IAAI,MAAM,SAAS,IAAI,UAAU,OAAO,IAAI,aAAa;gBACvD,6EAA6E;gBAC7E,UAAU,OAAO,CAAC,IAAI,CAAC,iBAAiB,aAAa,gBAAgB,MAAM,SAAS;YACtF,OAAO,IAAI,CAAC,MAAM,SAAS,EAAE;gBAC1B,QAAQ,GAAG,CAAC,CAAC,sDAAsD,EAAE,eAAe,CAAC,CAAC;YACtF,6FAA6F;YAC7F,+EAA+E;YAClF;QACF;QAEC,GAAG,mBAAmB,GAAG,CAAC;YACtB,QAAQ,KAAK,CAAC,CAAC,wCAAwC,EAAE,eAAe,CAAC,CAAC,EAAE;QAChF;QAED,kCAAkC;QAClC,GAAG,uBAAuB,GAAG;YAC3B,MAAM,QAAQ,GAAG,eAAe;YAChC,QAAQ,GAAG,CAAC,CAAC,sCAAsC,EAAE,eAAe,aAAa,EAAE,OAAO;YAC1F,IAAI,UAAU,YAAY,UAAU,kBAAkB,UAAU,UAAU;gBACtE,QAAQ,IAAI,CAAC,CAAC,gCAAgC,EAAE,eAAe,CAAC,EAAE,MAAM,cAAc,CAAC;gBACvF,6BAA6B;gBAC7B,IAAI,mBAAmB,OAAO,CAAC,eAAe,EAAE;oBAC7C,mBAAmB,OAAO,CAAC,eAAe,CAAC,KAAK;oBAChD,OAAO,mBAAmB,OAAO,CAAC,eAAe;gBACpD;gBACA,kBAAkB;YAClB,8FAA8F;YAC9F,6DAA6D;YACjE;QACF;QAEA,GAAG,sBAAsB,GAAG;YACxB,QAAQ,GAAG,CAAC,CAAC,qCAAqC,EAAE,eAAe,aAAa,EAAE,GAAG,cAAc,EAAE;YACrG,2DAA2D;YAC3D,IAAI,GAAG,iBAAiB,IAAI,GAAG,cAAc,KAAK,UAAU;gBACvD,MAAM,QAAQ,AAAC,GAAW,cAAc,IAAI,EAAE;gBAC9C,QAAQ,GAAG,CAAC,CAAC,2BAA2B,EAAE,MAAM,MAAM,CAAC,uBAAuB,EAAE,gBAAgB;gBAChG,MAAO,MAAM,MAAM,CAAE;oBACjB,MAAM,YAAY,MAAM,KAAK;oBAC7B,IAAI;wBACA,MAAM,GAAG,eAAe,CAAC,IAAI,gBAAgB;oBACjD,EAAE,OAAO,OAAO;wBACZ,QAAQ,KAAK,CAAC,CAAC,sDAAsD,EAAE,eAAe,CAAC,CAAC,EAAE;oBAC9F;gBACJ;gBACC,GAAW,cAAc,GAAG,EAAE;YACpC;QACJ;QAGA,6BAA6B;QAC7B,IAAI,aAAa;YACb,6DAA6D;YAC7D,IAAI,CAAC,eAAe,OAAO,EAAE;gBACzB,QAAQ,IAAI,CAAC;YACb,6CAA6C;YACjD;YACA,GAAG,WAAW,GACb,IAAI,CAAC,CAAA,QAAS,GAAG,mBAAmB,CAAC,QACrC,IAAI,CAAC;gBACJ,IAAI,UAAU,OAAO,IAAI,aAAa;oBAClC,QAAQ,GAAG,CAAC,CAAC,iCAAiC,EAAE,gBAAgB;oBAChE,UAAU,OAAO,CAAC,IAAI,CAAC,SAAS,aAAa,gBAAgB,GAAG,gBAAgB;gBACpF;YACF,GACC,KAAK,CAAC,CAAA,QAAS,QAAQ,KAAK,CAAC,yCAAyC;QAC3E;QAEA,OAAO;IACT;IAEA,gCAAgC;IAChC,MAAM,iBAAiB,CAAC,UAAkB;QACxC,IAAI,CAAC,gBAAgB,OAAO,EAAE;QAE9B,IAAI,eAAe,gBAAgB,OAAO,CAAC,aAAa,CAAC,CAAC,oBAAoB,EAAE,SAAS,EAAE,CAAC;QAC5F,IAAI,eAAwC;QAC5C,IAAI,cAAqC;QACzC,gFAAgF;QAChF,MAAM,cAAc,gBAAgB,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QAEvD,IAAI,CAAC,cAAc;YACf,QAAQ,GAAG,CAAC,CAAC,uDAAuD,EAAE,UAAU;YAChF,eAAe,SAAS,aAAa,CAAC;YACtC,aAAa,YAAY,CAAC,kBAAkB;YAC5C,aAAa,SAAS,GAAG,oEAAoE,oBAAoB;YAEjH,eAAe,SAAS,aAAa,CAAC;YACtC,aAAa,QAAQ,GAAG;YACxB,aAAa,WAAW,GAAG;YAC3B,aAAa,SAAS,GAAG;YACzB,aAAa,WAAW,CAAC;YAEzB,cAAc,SAAS,aAAa,CAAC;YACrC,YAAY,SAAS,GAAG,kFAAkF,wBAAwB;YAClI,YAAY,WAAW,GAAG,cAAc,YAAY,IAAI,GAAG,SAAS,SAAS,CAAC,GAAG,IAAI,2BAA2B;YAChH,aAAa,WAAW,CAAC;YAEzB,gBAAgB,OAAO,CAAC,WAAW,CAAC;QACxC,OAAO;YACH,QAAQ,GAAG,CAAC,CAAC,oEAAoE,EAAE,UAAU;YAC7F,eAAe,aAAa,aAAa,CAAC;YAC1C,cAAc,aAAa,aAAa,CAAC;YACzC,IAAG,eAAe,eAAe,YAAY,WAAW,KAAK,YAAY,IAAI,EAAE;gBAC1E,YAAY,WAAW,GAAG,YAAY,IAAI,EAAE,yBAAyB;YAC1E;QACJ;QAEA,gEAAgE;QAChE,IAAI,gBAAgB,aAAa,SAAS,KAAK,QAAQ;YACnD,aAAa,SAAS,GAAG;YACzB,oDAAoD;YACpD,aAAa,IAAI,GAAG,KAAK,CAAC,CAAA,IAAK,QAAQ,IAAI,CAAC,CAAC,sCAAsC,EAAE,SAAS,CAAC,CAAC,EAAE;QACtG;IACF;IAGA,MAAM,oBAAoB,CAAC;QACzB,IAAI,CAAC,gBAAgB,OAAO,EAAE;QAC9B,MAAM,eAAe,gBAAgB,OAAO,CAAC,aAAa,CAAC,CAAC,oBAAoB,EAAE,SAAS,EAAE,CAAC;QAC9F,IAAI,cAAc;YAChB,QAAQ,GAAG,CAAC,CAAC,uDAAuD,EAAE,UAAU;YAChF,MAAM,eAAe,aAAa,aAAa,CAAC;YAChD,sCAAsC;YACtC,IAAI,gBAAgB,aAAa,SAAS,EAAE;gBACvC,aAAa,SAAS,CAAiB,SAAS,GAAG,OAAO,CAAC,CAAA,QAAS,MAAM,IAAI;gBAC/E,aAAa,SAAS,GAAG,MAAM,kBAAkB;YACrD;YACA,gDAAgD;YAChD,aAAa,UAAU,EAAE,YAAY;QACvC;IACF;IAGA,0BAA0B;IAC1B,MAAM,oBAAoB;QACxB,IAAI,CAAC,YAAY,IAAI,MAAM,CAAC,QAAQ,CAAC,YAAY,KAAK,CAAC,kBAAkB;YACpE,MAAM;gBAAE,SAAS;gBAAe,OAAO,EAAE;gBAA0C,aAAa,EAAE;YAA+C;YACjJ;QACL;QAEA,IAAI,CAAC,UAAU,OAAO,IAAI,CAAC,UAAU,OAAO,CAAC,SAAS,EAAE;YACnD,MAAM,WAAW,EAAE;YACnB,QAAQ,KAAK,CAAC;YACd,MAAM;gBAAE,SAAS;gBAAe,OAAO,EAAE;gBAA+C,aAAa;YAAS;YAC9G,mBAAmB;YACnB;QACJ;QAED,gBAAgB,OAAO,oBAAoB;QAC3C,mBAAmB,OAAO,wBAAwB;QAElD,MAAM,aAAa;YACf,IAAI,UAAU,OAAO,EAAE;gBACnB,QAAQ,GAAG,CAAC,CAAC,yCAAyC,EAAE,YAAY,SAAS,EAAE,KAAK,IAAI,EAAE;gBAC1F,UAAU,OAAO,CAAC,IAAI,CAAC,aAAa,aAAa,KAAK,IAAI;YAC1D,kEAAkE;YACtE,OAAO;gBACF,QAAQ,KAAK,CAAC;gBACd,gBAAgB;gBAChB,MAAM,WAAW,EAAE;gBACnB,MAAM;oBAAE,SAAS;oBAAe,OAAO,EAAE;oBAA+C,aAAa;gBAAS;gBAC9G,mBAAmB;YACxB;QACJ;QAEA,MAAM,gBAAgB;YAClB,gBAAgB,QAAQ,6CAA6C;QACzE;QAEA,IAAI,wBAAwB,MAAM;YAChC;QACF,OAAO,IAAI,wBAAwB,OAAO;YACxC,MAAM;gBAAE,SAAS;gBAAe,OAAO,EAAE;gBAA+C,aAAa,EAAE;YAA2C;YAClJ,gBAAgB;QAClB,OAAO;YACL,sDAAsD;YACtD,MAAM,wBAAwB,YAAY;QAC5C;IACF;IAEA,MAAM,qBAAqB;QACvB,IAAI,CAAC,MAAM;QAEV,IAAI,CAAC,UAAU,OAAO,IAAI,CAAC,UAAU,OAAO,CAAC,SAAS,EAAE;YACtD,MAAM,WAAW,EAAE;YACnB,QAAQ,KAAK,CAAC;YACd,MAAM;gBAAE,SAAS;gBAAe,OAAO,EAAE;gBAA+C,aAAa;YAAS;YAC9G,mBAAmB;YACnB;QACF;QAED,gBAAgB;QAChB,mBAAmB;QACnB,MAAM,UAAU,uBAAuB,8BAA8B;QAErE,MAAM,cAAc;YAChB,IAAI,UAAU,OAAO,EAAE;gBACnB,QAAQ,GAAG,CAAC,CAAC,2CAA2C,EAAE,QAAQ,SAAS,EAAE,KAAK,IAAI,EAAE;gBACxF,UAAU,OAAO,CAAC,IAAI,CAAC,eAAe,SAAS,KAAK,IAAI;YACxD,6CAA6C;YACjD,OAAO;gBACH,QAAQ,KAAK,CAAC;gBACd,gBAAgB;gBAChB,MAAM,WAAW,EAAE;gBACnB,MAAM;oBAAE,SAAS;oBAAe,OAAO,EAAE;oBAA+C,aAAa;gBAAS;gBAC9G,mBAAmB;YACvB;QACJ;QAEA,MAAM,gBAAgB;YACpB,gBAAgB,QAAQ,6CAA6C;QACvE;QAGA,IAAI,wBAAwB,MAAM;YAC9B;QACJ,OAAO,IAAI,wBAAwB,OAAO;YACtC,MAAM;gBAAE,SAAS;gBAAe,OAAO,EAAE;gBAA+C,aAAa,EAAE;YAA2C;YAClJ,gBAAgB;QACpB,OAAO;YACH,MAAM,wBAAwB,aAAa;QAC/C;IACJ;IAGA,MAAM,qBAAqB,CAAC,YAAY,IAAI;QAC1C,QAAQ,GAAG,CAAC;QAEZ,gCAAgC;QAChC,IAAI,eAAe,OAAO,EAAE;YAC1B,QAAQ,GAAG,CAAC;YACZ,eAAe,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC,CAAA,QAAS,MAAM,IAAI;YAC9D,eAAe,OAAO,GAAG;QAC3B;QACA,4BAA4B;QAC5B,IAAI,cAAc,OAAO,EAAE;YACvB,cAAc,OAAO,CAAC,SAAS,GAAG;QACtC;QAEA,6BAA6B;QAC7B,QAAQ,GAAG,CAAC;QACZ,OAAO,OAAO,CAAC,mBAAmB,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC,IAAI,GAAG;YACxD,QAAQ,GAAG,CAAC,CAAC,wCAAwC,EAAE,IAAI;YAC3D,GAAG,KAAK;YACR,kBAAkB,KAAK,+BAA+B;QAC1D;QACA,mBAAmB,OAAO,GAAG,CAAC,GAAG,iBAAiB;QAElD,6CAA6C;QAC7C,IAAI,gBAAgB,OAAO,EAAE;YACzB,gBAAgB,OAAO,CAAC,SAAS,GAAG;QACxC;QAEA,wDAAwD;QACxD,IAAI,aAAa,UAAU,OAAO,IAAI,UAAU,OAAO,CAAC,SAAS,IAAI,mBAAmB,aAAa;YACjG,QAAQ,GAAG,CAAC,CAAC,wCAAwC,EAAE,aAAa;YACpE,UAAU,OAAO,CAAC,IAAI,CAAC,cAAc;QACzC;QAEA,wBAAwB;QACxB,mBAAmB;QACnB,eAAe;QACf,mBAAmB,EAAE,GAAG,yBAAyB;QACjD,gBAAgB;QAChB,gBAAgB;QAChB,cAAc;QACd,uCAAuC;QAEvC,IAAI,WAAW;YACV,MAAM;gBAAE,OAAO,EAAE;YAAoC;QAC1D;QACC,QAAQ,GAAG,CAAC;IACf;IAEA,MAAM,cAAc;QACjB,IAAI,eAAe,OAAO,EAAE;YACzB,MAAM,cAAc,eAAe,OAAO,CAAC,cAAc;YACzD,IAAI,YAAY,MAAM,GAAG,GAAG;gBACxB,MAAM,WAAW,CAAC,WAAW,CAAC,EAAE,CAAC,OAAO;gBACxC,WAAW,CAAC,EAAE,CAAC,OAAO,GAAG;gBACzB,gBAAgB,CAAC,WAAW,oCAAoC;gBAChE,MAAM;oBAAE,OAAO,WAAW,EAAE,gCAAgC,EAAE;gBAA+B;gBAC7F,QAAQ,GAAG,CAAC,CAAC,2BAA2B,EAAE,WAAW,YAAY,YAAY;YACjF,OAAO;gBACH,QAAQ,IAAI,CAAC;YACjB;QACJ,OAAO;YACH,QAAQ,IAAI,CAAC;QACjB;IACF;IAEA,MAAM,cAAc;QAChB,IAAI,eAAe,OAAO,EAAE;YAC1B,MAAM,cAAc,eAAe,OAAO,CAAC,cAAc;YACzD,IAAI,YAAY,MAAM,GAAG,GAAG;gBACxB,MAAM,WAAW,CAAC,WAAW,CAAC,EAAE,CAAC,OAAO;gBACxC,WAAW,CAAC,EAAE,CAAC,OAAO,GAAG;gBACzB,cAAc,CAAC,WAAW,wCAAwC;gBAClE,MAAM;oBAAE,OAAO,WAAW,EAAE,mCAAmC,EAAE;gBAAkC;gBACnG,QAAQ,GAAG,CAAC,CAAC,uBAAuB,EAAE,WAAW,YAAY,YAAY;YAC7E,OAAO;gBACF,QAAQ,IAAI,CAAC;YAClB;QACJ,OAAO;YACH,QAAQ,IAAI,CAAC;QACjB;IACF;IAGA,MAAM,sBAAsB;QAC1B,IAAI,aAAa;YACf,UAAU,SAAS,CAAC,SAAS,CAAC,aAC3B,IAAI,CAAC;gBACJ,MAAM;oBAAE,OAAO,EAAE;gBAAmC;YACtD,GACC,KAAK,CAAC,CAAA;gBACL,QAAQ,KAAK,CAAC,iDAAiD;gBAC/D,MAAM;oBAAE,SAAS;oBAAe,OAAO,EAAE;gBAAmC;YAC9E;QACJ;IACF;IAEA,uBAAuB;IAEvB,IAAI,aAAa;QACf,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,iNAAA,CAAA,UAAO;gBAAC,WAAU;;;;;;;;;;;IAGzB;IAEA,IAAI,CAAC,MAAM;QACT,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC,oNAAA,CAAA,cAAW;oBAAC,WAAU;;;;;;8BACvB,8OAAC;oBAAG,WAAU;8BAA+B,EAAE;;;;;;8BAC/C,8OAAC;oBAAE,WAAU;8BAA8B,EAAE,mCAAmC;wBAAE,UAAU,EAAE;oBAAoB;;;;;;8BAClH,8OAAC,4JAAA,CAAA,UAAI;oBAAC,MAAK;8BACT,cAAA,8OAAC,kIAAA,CAAA,SAAM;;0CAAC,8OAAC,wMAAA,CAAA,QAAK;gCAAC,WAAU;;;;;;4BAAiB;4BAAE,EAAE;;;;;;;;;;;;;;;;;;IAItD;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,gIAAA,CAAA,OAAI;YAAC,WAAU;;8BACd,8OAAC,gIAAA,CAAA,aAAU;;sCACT,8OAAC,gIAAA,CAAA,YAAS;4BAAC,WAAU;;8CACnB,8OAAC,oMAAA,CAAA,QAAK;oCAAC,WAAU;;;;;;gCAChB,EAAE;;;;;;;sCAEL,8OAAC,gIAAA,CAAA,kBAAe;sCACb,kBACG,EAAE,wCAAwC;gCAAE,MAAM;4BAAY,KAC9D,EAAE;;;;;;sCAEP,8OAAC,iIAAA,CAAA,QAAK;4BAAC,SAAQ;4BAAc,WAAU;;8CACrC,8OAAC,oNAAA,CAAA,cAAW;oCAAC,WAAU;;;;;;8CACvB,8OAAC,iIAAA,CAAA,aAAU;8CAAE,EAAE;;;;;;8CACf,8OAAC,iIAAA,CAAA,mBAAgB;8CACb,EAAE,6CAA6C;wCAAE,KAAK,6DAA6C,EAAE;oCAAoC;;;;;;;;;;;;wBAI9I,mBAAmB,CAAC,iCACnB,8OAAC,iIAAA,CAAA,QAAK;4BAAC,SAAQ;4BAAc,WAAU;;8CACrC,8OAAC,oNAAA,CAAA,cAAW;oCAAC,WAAU;;;;;;8CACvB,8OAAC,iIAAA,CAAA,aAAU;8CAAE,EAAE;;;;;;8CACf,8OAAC,iIAAA,CAAA,mBAAgB;;wCACd;sDACD,8OAAC;;;;;wCACA,EAAE;;;;;;;;;;;;;;;;;;;8BAKZ,8OAAC,gIAAA,CAAA,cAAW;oBAAC,WAAU;;wBACpB,kBACC,8BAA8B;sCAC9B,8OAAC;4BAAI,WAAU;;8CAEb,8OAAC;oCAAI,WAAU;;sDAEX,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAM,KAAK;oDAAe,WAAU;oDAA6B,QAAQ;oDAAC,KAAK;oDAAC,WAAW;;;;;;8DAC5F,8OAAC;oDAAI,WAAU;;wDACV,KAAK,IAAI;wDAAC;wDAAG,EAAE;wDAAsB;;;;;;;8DAG1C,8OAAC;oDAAI,WAAU;;wDACT,8BAAgB,8OAAC,0MAAA,CAAA,SAAM;4DAAC,WAAU;;;;;;wDAClC,4BAAc,8OAAC,8MAAA,CAAA,WAAQ;4DAAC,WAAU;;;;;;;;;;;;gDAIvC,wBAAwB,uBACrB,8OAAC;oDAAI,WAAU;;sEACX,8OAAC,8MAAA,CAAA,WAAQ;4DAAC,WAAU;;;;;;sEACpB,8OAAC;4DAAE,WAAU;sEAAyB,EAAE;;;;;;sEACxC,8OAAC;sEAAG,EAAE;;;;;;;;;;;;gDAGb,wBAAwB,QAAQ,2BAC7B,8OAAC;oDAAI,WAAU;;sEACX,8OAAC,iNAAA,CAAA,UAAO;4DAAC,WAAU;;;;;;sEACnB,8OAAC;sEAAG,EAAE;;;;;;;;;;;;gDAGZ,4BACI,8OAAC;oDAAI,WAAU;8DAEX,cAAA,8OAAC;wDAAK,WAAU;kEAA0B,KAAK,IAAI,CAAC,MAAM,CAAC,GAAG,WAAW;;;;;;;;;;;;;;;;;sDAOrF,8OAAC;4CAAI,KAAK;4CAAiB,WAAU;sDAElC,gBAAgB,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,UAAU,OAAO,EAAE,IAAI,MAAM,KAAK,mBACpE,8OAAC;gDAAI,WAAU;0DACV,EAAE;;;;;;;;;;;;;;;;;8CASjB,8OAAC;oCAAI,WAAU;;sDAEZ,8OAAC,4IAAA,CAAA,eAAY;;8DACV,8OAAC,4IAAA,CAAA,sBAAmB;oDAAC,OAAO;8DACxB,cAAA,8OAAC,kIAAA,CAAA,SAAM;wDAAC,SAAQ;wDAAU,MAAK;;0EAC3B,8OAAC,oMAAA,CAAA,QAAK;gEAAC,WAAU;;;;;;4DAChB,EAAE,+BAA+B;gEAAE,OAAO,gBAAgB,MAAM;4DAAC;;;;;;;;;;;;8DAG1E,8OAAC,4IAAA,CAAA,sBAAmB;oDAAC,OAAM;oDAAQ,WAAU;;sEACzC,8OAAC,4IAAA,CAAA,oBAAiB;sEAAE,EAAE;;;;;;sEACtB,8OAAC,4IAAA,CAAA,wBAAqB;;;;;wDACrB,gBAAgB,MAAM,GAAG,IACtB,gBAAgB,GAAG,CAAC,CAAC,kBACjB,8OAAC,4IAAA,CAAA,mBAAgB;gEAAY,WAAU;;oEAElC,EAAE,EAAE,KAAK,UAAU,OAAO,EAAE,mBACvB,8OAAC,8MAAA,CAAA,WAAQ;wEAAC,WAAU;;;;;6FACpB,8OAAC,kMAAA,CAAA,OAAI;wEAAC,WAAU;;;;;;kFAEtB,8OAAC;wEAAK,WAAU;kFAAwB,EAAE,IAAI;;;;;;oEAC7C,EAAE,EAAE,KAAK,UAAU,OAAO,EAAE,oBAAM,8OAAC;wEAAK,WAAU;;4EAAwC;4EAAE,EAAE;4EAAsB;;;;;;;;+DAPlG,EAAE,EAAE;;;;sFAW/B,8OAAC,4IAAA,CAAA,mBAAgB;4DAAC,QAAQ;sEAAE,EAAE;;;;;;;;;;;;;;;;;;sDAMzC,8OAAC;4CAAI,WAAU;;8DACZ,8OAAC;oDAAK,WAAU;;wDAA4C,EAAE;wDAAmC;;;;;;;8DACjG,8OAAC;oDAAK,WAAU;8DAAgD;;;;;;8DAChE,8OAAC,kIAAA,CAAA,SAAM;oDAAC,SAAQ;oDAAQ,MAAK;oDAAO,SAAS;oDAAqB,cAAY,EAAE;oDAAmC,WAAU;8DACzH,cAAA,8OAAC,kMAAA,CAAA,OAAI;wDAAC,WAAU;;;;;;;;;;;;;;;;;sDAKvB,8OAAC;4CAAI,WAAU;;8DACZ,8OAAC,kIAAA,CAAA,SAAM;oDAAC,SAAS,eAAe,gBAAgB;oDAAW,MAAK;oDAAO,SAAS;oDAAa,cAAY,eAAe,EAAE,kCAAkC,EAAE;8DACzJ,6BAAe,8OAAC,0MAAA,CAAA,SAAM;wDAAC,WAAU;;;;;6EAAe,8OAAC,gMAAA,CAAA,MAAG;wDAAC,WAAU;;;;;;;;;;;8DAEpE,8OAAC,kIAAA,CAAA,SAAM;oDAAC,SAAS,aAAa,gBAAgB;oDAAW,MAAK;oDAAO,SAAS;oDAAa,cAAY,aAAa,EAAE,iCAAiC,EAAE;8DACpJ,2BAAa,8OAAC,8MAAA,CAAA,WAAQ;wDAAC,WAAU;;;;;6EAAe,8OAAC,oMAAA,CAAA,QAAK;wDAAC,WAAU;;;;;;;;;;;;;;;;;sDAKxE,8OAAC,kIAAA,CAAA,SAAM;4CAAC,SAAS,IAAM,mBAAmB;4CAAO,SAAQ;;8DACvD,8OAAC,8MAAA,CAAA,WAAQ;oDAAC,WAAU;;;;;;gDACnB,EAAE;;;;;;;;;;;;;;;;;;mCAKX,2BAA2B;sCAC3B,8OAAC;4BAAI,WAAU;;8CAEb,8OAAC,gIAAA,CAAA,OAAI;oCAAC,WAAU;;sDACd,8OAAC,gIAAA,CAAA,aAAU;;8DACT,8OAAC,gIAAA,CAAA,YAAS;8DAAE,EAAE;;;;;;8DACd,8OAAC,gIAAA,CAAA,kBAAe;8DAAE,EAAE;;;;;;;;;;;;sDAEtB,8OAAC,gIAAA,CAAA,cAAW;4CAAC,WAAU;sDACrB,cAAA,8OAAC;gDAAI,WAAU;;kEACb,8OAAC,iIAAA,CAAA,QAAK;wDAAC,SAAQ;kEAAe,EAAE;;;;;;kEAChC,8OAAC,iIAAA,CAAA,QAAK;wDACJ,IAAG;wDACH,aAAa,EAAE;wDACf,OAAO;wDACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK,CAAC,WAAW,GAAG,IAAI;wDACjE,WAAW;wDACX,WAAU;wDACV,UAAU,aAAa,gBAAgB,CAAC,CAAC;wDACzC,iBAAc;wDACd,gBAAc,CAAC,CAAC;;;;;;;;;;;;;;;;;sDAItB,8OAAC,gIAAA,CAAA,aAAU;4CAAC,WAAU;sDACpB,cAAA,8OAAC,kIAAA,CAAA,SAAM;gDAAC,SAAS;gDAAmB,WAAU;gDAAS,UAAU,aAAa,gBAAgB,CAAC,eAAe,YAAY,MAAM,KAAK,KAAK,CAAC,CAAC;;oDACzI,6BAAe,8OAAC,iNAAA,CAAA,UAAO;wDAAC,WAAU;;;;;6EAAiC,8OAAC,wMAAA,CAAA,QAAK;wDAAC,WAAU;;;;;;oDACpF,EAAE;;;;;;;;;;;;;;;;;;gCAMR,KAAK,IAAI,KAAK,iCACb,8OAAC,gIAAA,CAAA,OAAI;oCAAC,WAAU;;sDACd,8OAAC,gIAAA,CAAA,aAAU;;8DACT,8OAAC,gIAAA,CAAA,YAAS;8DAAE,EAAE;;;;;;8DACd,8OAAC,gIAAA,CAAA,kBAAe;8DAAE,EAAE;;;;;;;;;;;;sDAEtB,8OAAC,gIAAA,CAAA,cAAW;4CAAC,WAAU;sDACpB,cAAA,8OAAC,kIAAA,CAAA,SAAM;gDAAC,SAAS;gDAAoB,WAAU;gDAAS,UAAU,aAAa,gBAAgB,CAAC,CAAC;;oDAC5F,6BAAe,8OAAC,iNAAA,CAAA,UAAO;wDAAC,WAAU;;;;;6EAAiC,8OAAC,oMAAA,CAAA,QAAK;wDAAC,WAAU;;;;;;oDACpF,EAAE;;;;;;;;;;;;sDAGT,8OAAC,gIAAA,CAAA,aAAU;sDACP,cAAA,8OAAC;gDAAE,WAAU;0DAAoD,EAAE;;;;;;;;;;;;;;;;;;;;;;;wBAQ/E,wBAAwB,SAAS,CAAC,iCACjC,8OAAC,iIAAA,CAAA,QAAK;4BAAC,SAAQ;4BAAc,WAAU;;8CACrC,8OAAC,oNAAA,CAAA,cAAW;oCAAC,WAAU;;;;;;8CACvB,8OAAC,iIAAA,CAAA,aAAU;8CAAE,EAAE;;;;;;8CACf,8OAAC,iIAAA,CAAA,mBAAgB;;wCACd,EAAE;sDACF,8OAAC,kIAAA,CAAA,SAAM;4CAAC,SAAQ;4CAAO,WAAU;4CAAwD,SAAS,IAAM,wBAAwB,KAAO,GAAG,KAAO;sDAC7I,EAAE;;;;;;;;;;;;;;;;;;wBAMZ,CAAC,mBAAmB,CAAC,iCACnB,8OAAC,iIAAA,CAAA,QAAK;4BAAC,SAAQ;4BAAU,WAAU;;8CACjC,8OAAC,oMAAA,CAAA,QAAK;oCAAC,WAAU;;;;;;8CACjB,8OAAC,iIAAA,CAAA,aAAU;8CAAE,EAAE;;;;;;8CACf,8OAAC,iIAAA,CAAA,mBAAgB;;wCACZ,EAAE;wCACF,KAAK,IAAI,KAAK,kBAAkB,CAAC,CAAC,EAAE,EAAE,oCAAoC,GAAG,CAAC,CAAC,EAAE,EAAE,uCAAuC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ9I","debugId":null}}]
}